---
title: Mantener Servidor Dedicado
ogImageTitle: Mantener Servidor Dedicado
ogImageSubtitle: Mantener tu Servidor Dedicado
---

import { Callout } from 'nextra/components';

# Mantener tu Servidor Dedicado

Este artículo te explicará cómo mantener tu [servidor dedicado](../dedicated-server) registrado con Zeabur.

<Callout>
    Si compraste un servidor dedicado de Zeabur, las tareas de operación y mantenimiento son realizadas por nosotros.
    Por favor, envía un ticket para informarnos qué proyecto deseas mantener y nuestro personal se encargará de ello.
</Callout>

## Limpieza del Espacio

Si encuentras que el espacio en disco de tu host es insuficiente, puedes intentar limpiar las imágenes Docker descargadas por K3s en tu host (esto generalmente se hace automáticamente).

```bash
# Verificar qué imágenes se han descargado (no necesitas escribir esta línea)
$ sudo k3s crictl images

# Eliminar todas las imágenes no utilizadas
$ sudo k3s crictl rmi --prune
```

A veces, los registros guardados por K3s para cada contenedor también pueden ocupar mucho espacio. Puedes intentar limpiar estos registros en el [directorio de registros de K3s](https://docs.k3s.io/faq#where-are-the-k3s-logs).

## Cambiar los Servidores DNS

Por defecto, los servidores dedicados de Zeabur utilizan [Cloudflare DNS](https://1.1.1.1/) como servidores DNS para el clúster (las máquinas en China continental utilizan [DNS Público de Alibaba Cloud](https://www.alidns.com/)).

Si necesitas cambiar los servidores DNS utilizados por el clúster (por ejemplo, al DNS Público de [DNSPod de Tencent Cloud](https://www.dnspod.cn/products/publicdns)), puedes editar `/etc/resolv.kubelet.conf` y cambiar el `nameserver` a los servidores DNS que desees.

```
nameserver 119.29.29.29
```

Recuerda reiniciar el servicio K3s después de hacer cambios.

```bash
$ sudo systemctl restart k3s
```

## Desactivar los Servicios de Zeabur

Si tienes un servidor dedicado propio, puedes desactivar todos los servicios de Zeabur y usar el VPS libremente para otros propósitos, como ejecutar servicios de Docker Compose.

<Callout type="warning">
    Al desactivar los servicios de Zeabur, no podrás crear proyectos ni servicios desde el panel de Zeabur, y los servicios que se estén ejecutando en Zeabur se detendrán. Sin embargo, aún podrás gestionar la configuración del servidor, como las reglas del firewall y los reinicios. Ten en cuenta que reinstalar el servidor desde Zeabur reinstalará y reactivará los servicios de Zeabur.
</Callout>

### Desactivar los Servicios de Zeabur

También puedes hacer clic en la opción **SSH** en la barra lateral del panel de Zeabur para conectarte al servidor directamente desde el navegador, sin necesidad de una terminal local:

![Conectarse por SSH desde el panel de Zeabur](/dedicated-server/server-ssh-from-dashboard.webp)

O conéctate a tu servidor por SSH y ejecuta:

```bash
sudo systemctl disable --now k3s containerd
```

> Nota: Detener estos servicios hará que todos los contenedores y servicios que se estén ejecutando en el servidor se detengan. Proceda con precaución.

### Reactivar los Servicios de Zeabur

Si quieres volver a poner en línea Zeabur, conéctate por SSH y ejecuta:

```bash
sudo systemctl enable --now k3s containerd
```

## Uso de VS Code para Desarrollo Remoto

Puedes usar [VS Code Remote - SSH](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh) para conectarte a tu servidor dedicado y editar archivos u operar contenedores directamente en un entorno IDE familiar.

### Paso 1: Instalar la Extensión Remote-SSH

Abre VS Code e instala la extensión **Remote - SSH** desde el Marketplace de extensiones.

### Paso 2: Configurar la Autenticación por Clave SSH

Genera un par de claves SSH en tu máquina local (si aún no tienes uno) y agrega la clave pública al servidor:

```bash
# Generar un par de claves SSH en tu máquina local
$ ssh-keygen -t ed25519

# Copiar la clave pública al servidor
$ ssh-copy-id <nombre-de-usuario>@<IP-del-servidor>
```

Si `ssh-copy-id` no está disponible, puedes agregar la clave pública manualmente:

```bash
$ cat ~/.ssh/id_ed25519.pub | ssh <nombre-de-usuario>@<IP-del-servidor> "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"
```

### Paso 3: Conectarse a través de VS Code

Abre la Paleta de Comandos de VS Code (`Ctrl+Shift+P` / `Cmd+Shift+P`), selecciona **Remote-SSH: Connect to Host** e ingresa `<nombre-de-usuario>@<IP-del-servidor>` para conectarte.

### Paso 4: Localizar la Ruta de Almacenamiento del Servicio

Después de conectarte, estarás en el directorio raíz del servidor. Para encontrar dónde se almacenan los archivos de tu servicio, primero localiza el PVC (Persistent Volume Claim) de tu servicio, luego encuentra el PV (Persistent Volume) correspondiente y su ruta en el host.

El nombre del PVC sigue el formato `<volume-id>-service-<service-id>`, ubicado en el namespace `environment-<environment-id>`.

```bash
# Listar todos los PVCs para encontrar el volumen de tu servicio
$ kubectl get pvc -A

# Encontrar el PV al que está vinculado el PVC
$ kubectl get pvc <nombre-del-pvc> -n <namespace> -o jsonpath='{.spec.volumeName}'

# Obtener la ruta del host del PV correspondiente
$ kubectl get pv <nombre-del-pv> -o jsonpath='{.spec.local.path}'
```

Luego puedes abrir esta ruta en VS Code usando **Archivo → Abrir Carpeta** para comenzar a editar los archivos de tu servicio.

### Paso 5: Acceder al Shell del Contenedor

Para obtener un entorno de terminal dentro del contenedor de tu servicio (equivalente a la Terminal Web en Zeabur):

```bash
# Listar los pods en un namespace
$ kubectl get pods -n <namespace>

# Abrir un shell en un pod
$ kubectl exec -it <nombre-del-pod> -n <namespace> -- /bin/sh
```

## Desinstalación

Primero, necesitas eliminar el servidor y los servicios desplegados en él desde Zeabur.

![Eliminar Servidor](/dedicated-server/remove-server.webp)

El paso "Eliminar Servidor" **no eliminará la infraestructura configurada por Zeabur en tu servidor**. La infraestructura de Zeabur está construida principalmente sobre [K3s](https://k3s.io/), por lo que los pasos de desinstalación [siguen los pasos de desinstalación de K3s](https://docs.k3s.io/installation/uninstall).

```bash
$ /usr/local/bin/k3s-uninstall.sh
```
