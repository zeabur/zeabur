---
title: サーバーレスの出力形式
ogImageTitle: サーバーレスの出力形式
ogImageSubtitle: Zeaburでサーバーレスアプリケーションをデプロイ
---

import { Callout } from 'nextra-theme-docs'

# サーバーレスの出力形式

Zeaburはコンテナ化されたデプロイおよびサーバーレスデプロイの両方をサポートしています。プロジェクトをZeaburにデプロイすると、Zeaburは [zbpack](https://github.com/zeabur/zbpack) を使用してプロジェクトを自動的に解析および構築します。ビルドプロセスに関する詳細情報は [ビルド](./builds) で確認できます。

コンテナ化されたデプロイには、サービスが使用されていなくてもサービスのさまざまな内部の状態を維持するために開いたままにする必要があるため、より多くの計算リソースが必要です。サーバーレスデプロイメソッドは、サービスを複数のサーバーレス関数に分解し、即座に使用できるようにします。サービスが外部リクエストを受信すると、関数を実行して結果を計算して返し、これによりより高いスケーラビリティが提供され、不要なコストを節約できます。

## ビルドの出力形式

追加の構成なしで、zbpackはプロジェクトで使用されている開発フレームワークに基づいてサーバーレスメソッドを使用するかどうかを選択します。zbpackがビルドでサーバーレスメソッドを使用することを決定した場合、ビルドが完了した後、プロジェクトディレクトリ内に `.zeabur/output` ディレクトリが見つかります。ディレクトリの下の構造は以下のとおりです。

```
.zeabur/output
├── static
│   ├── index.html
│   └── ...
├── functions
│   ├── index.func
│   └── ...
```

`static` ディレクトリには HTML、CSS、JavaScriptなどの静的リソースが格納され、`functions` ディレクトリにはサーバーレス関数が格納されます。`.func` で終わる各ディレクトリは関数エントリであり、オンラインでサービスがデプロイされた後のパスに対応します。例えば：

- `functions/index.func` はパス `/` に対応します
- `functions/users/get.func` はパス `/users/get` に対応します
- `functions/api/orders.func` はパス `/api/orders` に対応します
- `functions/api/orders/[id].func` はパス `/api/orders/[id]` に対応し、`[id]` はマッチング可能な動的パスです。

ビルド出力の互換性を最大限に高めるために、zbpackのサーバーレスビルドの出力形式は [Vercel](https://vercel.com/) の [ビルド出力API (v3)](https://vercel.com/docs/build-output-api/v3) とできるだけ一貫した形式になっています。これにより、既存のフレームワークや将来の新しいフレームワークの作者やチームは、異なるプラットフォーム用のアダプタを再開発する必要がありません。

## 純粋な静的出力

[Vite](https://vitejs.dev/) などの純粋な静的ウェブサイトフレームワークには、zbpackによって構築された後の `.zeabur/output` ディレクトリには `static` ディレクトリしかなく、`functions` ディレクトリは存在しません。これは、純粋な静的ウェブサイトフレームワークはサーバーレスメソッドを使用する必要がないため、zbpackはすべての静的リソースを `static` ディレクトリに直接パッケージ化し、デプロイ時に `static` ディレクトリ内のリソースを直接CDNにデプロイするためです。

## サーバーレス関数

[Next.js](https://nextjs.org/) や [Nuxt.js](https://nuxtjs.org/) など、サーバーレスを使用する必要があるフレームワークの場合、zbpackによって構築された後の `.zeabur/output` ディレクトリには `static` ディレクトリと `functions` ディレクトリの2つが存在します。`static` ディレクトリには静的リソースが、`functions` ディレクトリにはサーバーレス関数が格納されます。

Zeaburでデプロイされたサービスでは、サービスの詳細ページの右上のコーナーに、現在サーバーレスメソッドを使用してデプロイされているか、コンテナ化メソッドを使用してデプロイされているかが表示されます：

![サービスの詳細ページ](/advanced/serverless.png)
