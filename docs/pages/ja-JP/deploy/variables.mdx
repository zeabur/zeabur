---
title: 環境変数の設定
ogImageTitle: 環境変数の設定
ogImageSubtitle: Zeaburでの環境変数の設定
---

# 環境変数の設定

環境変数はアプリケーションの設定に使用されます。Zeaburはサービス向けに環境変数を設定する方法を提供します。

## 追加、編集、削除

サービスの **Variables** タブで環境変数を設定でき、**Add Variables** で追加可能。

![environment variables](/environment/add-variables.png)

Zeaburはこれらの環境変数を自動的にサービスに注入します。

- `<YOUR_SERVICE_NAME>_HOST`: サービスのホスト。
- `PORT`: サービスのポート。
- データベース資格情報（[PostgreSQL](https://zeabur.com/templates/B20CX0)）や [Redis](https://zeabur.com/templates/KQZHXT) 接続文字列など。

これらは手動で設定する必要はありません。

![db env](/environment/env_var.png)

変数にホバーすると編集または削除を選択可能。

![hovering](/environment/env_var_hover.png)

## Raw編集

複数変数を一括追加する場合、バッチ編集を使用。

**Edit as Raw** ボタンをクリックしてバッチモードに入り、`.env` ファイル形式で設定。

![edit-raw](/environment/edit_raw_env_var.png)

## 変数参照

Zeaburでは他の変数をテンプレート構文で参照可能。

新しい変数設定時に既存変数を `${}` で囲む。

**例:**

`USERNAME` と `PASSWORD` がある場合、`AUTH_INFOR` を以下のように設定：

```bash
AUTH_INFOR=${USERNAME}:${PASSWORD}
```

![reference](/environment/var-reference.png)

これで `USERNAME` と `PASSWORD` の値が自動結合され `AUTH_INFOR` に注入されます。

## 特殊変数

「特殊変数」はZeaburが事前定義した環境変数で直接使用可能。

### 参照方法

- Zeaburの入力ボックス: `${VARIABLE}` 形式。
- アプリケーション内: `process.env.VARIABLE` など。

### 変数優先順位

サービス内の展開順序:

1. 現在のサービスで定義された環境変数。
2. 未定義なら他のサービスで公開された変数。
3. 未定義なら特殊変数。

### 変数一覧

#### ホスト名/ポート

- `${ZEABUR_[PORTNAME]_URL}`: 特定ポートのURL (例: `https://test.zeabur.app`)。Domainセクションで設定。Gitサービスでは `PORTNAME` は常に `web`。
- `${ZEABUR_[PORTNAME]_DOMAIN}`: ドメイン部分。
- `${CONTAINER_HOSTNAME}`: 現在のサービスのホスト名。`${MYSQL_HOST}` = `${CONTAINER_HOSTNAME}` のように公開。
- `${[PORTNAME]_PORT}`: Prebuiltサービスのポート (例: `DATABASE_PORT`=3306)。Gitでは8080 (`${PORT}`)。

#### Zeabur情報

- `${ZEABUR_SERVICE_ID}`: サービスID
- `${ZEABUR_PROJECT_ID}`: プロジェクトID
- `${ZEABUR_ENVIRONMENT_ID}`: 環境ID
- `${ZEABUR_USER_ID}`: プロジェクト作成ユーザーID

#### Git情報 (Gitサービスビルド時のみ)

- `${ZEABUR_GIT_COMMIT_SHA}`: コミットSHA
- `${ZEABUR_GIT_AUTHOR}`: コミット作者
- `${ZEABUR_GIT_BRANCH}`: ブランチ名
- `${ZEABUR_GIT_REPO_NAME}`: リポジトリ名
- `${ZEABUR_GIT_REPO_OWNER}`: オーナー
- `${ZEABUR_GIT_COMMIT_MESSAGE}`: コミットメッセージ

#### ユーティリティ

- `${PASSWORD}`: Zeaburが各サービスに生成するランダムパスワード。

